@if (!loading) {
  <div class="page-container">
    <header class="page-header">
      <h1>üïπÔ∏è Ph√≤ng ƒêang Ch·ªù</h1>
    </header>


    <div class="grid">
      @if (items.length > 0) {

        @for (r of items; track r.id) {
          <div class="room-card">
            <div class="room-head">
              <span class="badge" [class.pub]="r.cong_khai"
                    [class.pri]="!r.cong_khai">{{ r.cong_khai ? 'PUBLIC' : 'PRIVATE' }}</span>
              <h3>{{ r.ten_phong || ('Ph√≤ng #' + r.id) }}</h3>
              <p class="sub">B·ªô c√¢u h·ªèi: <b>{{ r.bo_cau_hoi_tieu_de }}</b></p>
            </div>
            <div class="room-body">
              <div>Ch·ªß ph√≤ng: <b>{{ r.chu_phong_ten }}</b></div>
              <div>Gi·ªõi h·∫°n ng∆∞·ªùi ch∆°i: {{ r.gioi_han_nguoi_choi }}</div>
              <div>Th·ªùi gian m·ªói c√¢u: {{ r.gioi_han_thoi_gian_cau_giay }}s</div>
              <div>Lu·∫≠t t√≠nh ƒëi·ªÉm: {{ r.luat_tinh_diem }}</div>
            </div>
            <div class="room-actions">
              <button (click)="tryJoin(r)">Tham gia</button>
            </div>
          </div>
        }
      } @else {
        <div class="empty-state">Kh√¥ng c√≥ ph√≤ng ch·ªù.</div>
      } </div>


    @if (totalPages > 1) {
      <div class="pagination">
        <a (click)="changePage(page-1)" [class.disabled]="page === 0">¬´</a>

        @for (p of [].constructor(totalPages); track $index; let i = $index) {
          <a (click)="changePage(i)" [class.active]="i===page">{{ i + 1 }}</a>
        }

        <a (click)="changePage(page+1)" [class.disabled]="page === totalPages - 1">¬ª</a>
      </div>
    }

  </div>
} @else {
  <div class="empty-state"><i class="fas fa-spinner fa-spin"></i> ƒêang t·∫£i‚Ä¶</div>
}
