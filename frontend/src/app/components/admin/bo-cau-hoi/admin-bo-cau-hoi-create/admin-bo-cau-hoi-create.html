<div class="admin-bch-form animate-fade-down">

  <div class="form-header">
    <button class="btn-link" (click)="cancel()">
      <i class="fas fa-arrow-left"></i> Quay l·∫°i danh s√°ch
    </button>
  </div>

  <div class="form-card">
    <div class="card-header">
      <h2 class="form-title">T·∫°o b·ªô c√¢u h·ªèi m·ªõi</h2>
      <p class="form-subtitle">
        B·ªô c√¢u h·ªèi do Admin t·∫°o s·∫Ω ƒë∆∞·ª£c g·∫Øn nh√£n Official v√† d√πng cho c√°c gi·∫£i ƒë·∫•u.
      </p>
    </div>

    <form #createForm="ngForm" (ngSubmit)="submit()" autocomplete="off">
      <div class="card-body">

        <div class="form-section">
          <div class="form-group">
            <label>Ti√™u ƒë·ªÅ b·ªô c√¢u h·ªèi <span class="required">*</span></label>
            <input type="text" name="tieu_de" required [(ngModel)]="form.tieu_de"
                   placeholder="VD: To√°n 12 - Kh·∫£o s√°t h√†m s·ªë (Official)" class="form-input" autofocus/>
          </div>

          <div class="form-group">
            <label>M√¥ t·∫£ ng·∫Øn</label>
            <textarea rows="3" name="mo_ta" [(ngModel)]="form.mo_ta"
                      placeholder="Gi·ªõi thi·ªáu s∆° l∆∞·ª£c v·ªÅ n·ªôi dung..." class="form-textarea"></textarea>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Ch·ªß ƒë·ªÅ <span class="required">*</span></label>
            <select name="chu_de_id" required [(ngModel)]="form.chu_de_id" class="form-select">
              <option [ngValue]="0" disabled>-- Ch·ªçn ch·ªß ƒë·ªÅ --</option>
              @for (cd of chu_de_list; track cd.id) {
                <option [ngValue]="cd.id">{{ cd.ten }}</option>
              }
            </select>
          </div>

          <div class="form-group">
            <label>Ch·∫ø ƒë·ªô hi·ªÉn th·ªã</label>
            <select name="che_do_hien_thi" [(ngModel)]="form.che_do_hien_thi" class="form-select">
              <option value="PRIVATE">üîí Private (D√πng ƒë·ªÉ t·ªï ch·ª©c thi ƒë·∫•u)</option>
              <option value="PUBLIC">üåç Public (C√¥ng khai cho m·ªçi ng∆∞·ªùi)</option>
            </select>
          </div>
        </div>

        <div class="divider"></div>

        <div class="form-group">
          <label class="section-label">M·ª•c ƒë√≠ch s·ª≠ d·ª•ng <span class="required">*</span></label>
          <div class="selection-grid">
            @for (opt of loaiSuDungOptions; track opt.value) {
              <div class="selection-card"
                   [class.selected]="form.loai_su_dung === opt.value"
                   (click)="form.loai_su_dung = opt.value">
                <input type="radio" name="loai_su_dung" [value]="opt.value" [(ngModel)]="form.loai_su_dung" hidden>

                <div class="check-icon"><i class="fas fa-check-circle"></i></div>
                <div class="card-icon" [ngClass]="getIconColor(opt.value)"><i class="fas" [ngClass]="opt.icon"></i>
                </div>

                <div class="card-info">
                  <h4>{{ opt.label }}</h4>
                  <p>{{ getUsageDesc(opt.value) }}</p>
                </div>
              </div>
            }
          </div>
        </div>

        <div class="form-group">
          <label class="section-label">Lo·∫°i ph√≠ tham gia</label>
          <div class="selection-grid two-cols">
            <div class="selection-card"
                 [class.selected]="!form.muon_tao_tra_phi"
                 (click)="form.muon_tao_tra_phi = false">
              <div class="check-icon"><i class="fas fa-check-circle"></i></div>
              <div class="card-icon green"><i class="fas fa-gift"></i></div>
              <div class="card-info">
                <h4>Mi·ªÖn ph√≠</h4>
                <p>Ph√°t h√†nh mi·ªÖn ph√≠ cho c·ªông ƒë·ªìng.</p>
              </div>
            </div>
            <div class="selection-card"
                 [class.selected]="form.muon_tao_tra_phi"
                 (click)="form.muon_tao_tra_phi = true">
              <div class="check-icon"><i class="fas fa-check-circle"></i></div>
              <div class="card-icon orange"><i class="fas fa-coins"></i></div>
              <div class="card-info">
                <h4>Tr·∫£ ph√≠ (Premium)</h4>
                <p>H·ªá th·ªëng t·ª± t√≠nh ph√≠ d·ª±a tr√™n s·ªë c√¢u h·ªèi.</p>
              </div>
            </div>
          </div>
        </div>

      </div>

      <div class="card-footer">
        <button type="button" class="btn-cancel" (click)="cancel()">H·ªßy b·ªè</button>
        <button type="submit" class="btn-submit" [disabled]="loading || createForm?.invalid">
          @if (loading) {
            <i class="fas fa-spinner fa-spin"></i> ƒêang x·ª≠ l√Ω...
          } @else {
            <i class="fas fa-plus-circle"></i> T·∫°o b·ªô c√¢u h·ªèi
          }
        </button>
      </div>

    </form>
  </div>
</div>
