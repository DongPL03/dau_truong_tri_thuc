<header class="global-navbar">
  <!-- üß† Logo -->
  <div class="logo">ƒê·∫§U TR∆Ø·ªúNG TRI TH·ª®C</div>

  <!-- üîó Navigation -->
  <nav class="main-nav">
    <a routerLink="/home" routerLinkActive="active" class="nav-item">
      <i class="fas fa-home"></i> Trang Ch·ªß
    </a>
    <a routerLink="/tran-dau/pending" routerLinkActive="active" class="nav-item">
      <i class="fas fa-bolt"></i> ƒê·∫•u Tr∆∞·ªùng
    </a>
    <a routerLink="/bo-cau-hoi/danh-sach-bo-cau-hoi" routerLinkActive="active" class="nav-item">
      <i class="fas fa-book-open"></i> Qu·∫£n L√Ω C√¢u h·ªèi
    </a>
    <a routerLink="/bang-xep-hang" routerLinkActive="active" class="nav-item">
      <i class="fas fa-trophy"></i> BXH
    </a>
  </nav>

  <!-- üë§ Th√¥ng tin ng∆∞·ªùi d√πng -->
  <div class="user-profile-actions">

    <!-- üîî Th√¥ng b√°o -->
    <div class="notification-wrapper" (click)="$event.stopPropagation()">
      <button class="nav-btn notification-btn" (click)="toggleNotif()">
        <i class="fas fa-bell"></i>
        @if (unreadCount > 0) {
          <span class="badge">{{ unreadCount }}</span>
        }
      </button>

      <!-- Dropdown th√¥ng b√°o -->
      <div class="notif-dropdown" [class.show]="notifOpen">
        <div class="notif-header">Th√¥ng b√°o m·ªõi</div>
        <ul class="notif-list">
          @for (n of notifications; track n.id) {
            <li>
              <i [class]="n.icon"></i>
              <span>{{ n.text }}</span>
            </li>
          }
        </ul>
        <div class="notif-footer">
          <button>Xem t·∫•t c·∫£</button>
        </div>
      </div>
    </div>

    <!-- üë§ Avatar + menu ng∆∞·ªùi d√πng -->
    <div class="user-dropdown" (click)="$event.stopPropagation()">
      <button class="avatar-btn" (click)="toggleUserMenu()">
        <img
          [src]="avatarUrl || 'assets/images/default-profile-image.jpeg'"
          alt="avatar"
          class="nav-avatar"
        />
        <span class="user-display-name">
          {{ user?.ho_ten || user?.ten_dang_nhap || 'Ng∆∞·ªùi d√πng' }}
        </span>
        <i class="fa-solid fa-chevron-down"></i>
      </button>

      <!-- Dropdown menu ng∆∞·ªùi d√πng -->
      <ul class="user-menu" [class.show]="userMenuOpen">
        <li (click)="goProfile()">
          <i class="fa-regular fa-user"></i> H·ªì s∆° c√° nh√¢n
        </li>
        <li (click)="logout()">
          <i class="fa-solid fa-right-from-bracket"></i> ƒêƒÉng xu·∫•t
        </li>
      </ul>
    </div>
  </div>
</header>
