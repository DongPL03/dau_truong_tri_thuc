/* --- CÀI ĐẶT TỔNG THỂ --- */
.page {
  padding: 24px 0;
  background: #f8fafc; /* Đổi sang màu nền sáng, ít chói hơn */
  min-height: calc(100vh - 60px);
  font-family: 'Nunito', sans-serif;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 16px; /* Thêm padding 2 bên cho responsive */
}

/* --- BANNER KẾT QUẢ CẢI TIẾN --- */
.hero-card {
  display: flex;
  flex-direction: column; /* Đổi thành cột để dễ kiểm soát hơn */
  gap: 16px; /* Khoảng cách giữa các phần tử chính */
  padding: 30px 40px; /* Tăng padding để có nhiều không gian hơn */
  border-radius: 20px;
  background: linear-gradient(135deg, #16a34a, #22c55e); /* Gradient mặc định cho trạng thái không thắng */
  color: #f0fdf4;
  margin-bottom: 30px; /* Tăng khoảng cách dưới */
  position: relative;
  overflow: hidden; /* Đảm bảo không có gì tràn ra ngoài */
  box-shadow: 0 10px 30px -10px rgba(22, 163, 74, 0.4); /* Đổ bóng mềm mại */

  &.is-winner {
    /* Gradient nổi bật hơn cho người thắng */
    background: linear-gradient(135deg, #10b981, #34d399); /* Xanh ngọc tươi sáng hơn */
    box-shadow: 0 15px 40px -10px rgba(52, 211, 153, 0.5); /* Đổ bóng mạnh hơn một chút */

    /* Thêm một hiệu ứng "tia sáng" nhỏ hoặc vệt mờ cho người thắng */
    &::before {
      content: '';
      position: absolute;
      top: -50px;
      right: -50px;
      width: 150px;
      height: 150px;
      background: radial-gradient(circle at top left, rgba(255, 255, 255, 0.15) 0%, transparent 70%);
      transform: rotate(45deg);
      opacity: 0.8;
      pointer-events: none;
    }
  }

  .hero-left {
    flex-grow: 1; /* Cho phép phần này chiếm không gian còn lại */
    .quiz-title {
      font-size: 14px;
      font-weight: 500;
      opacity: 0.9;
      margin-bottom: 4px; /* Giảm khoảng cách */
    }

    .hero-main {
      h1 {
        font-size: 44px; /* Tăng kích thước tiêu đề chính */
        font-weight: 800; /* Làm đậm hơn */
        margin: 0;
        line-height: 1.1; /* Giảm line-height */
        color: #fff;
        text-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Thêm đổ bóng chữ nhẹ */
      }

      .room-info {
        font-size: 15px;
        opacity: 0.95;
        margin-top: 8px; /* Tăng khoảng cách */
        color: #e0f2f7; /* Màu chữ sáng hơn một chút */
      }
    }
  }

  .hero-stats {
    display: flex;
    flex-wrap: wrap; /* Cho phép xuống dòng nếu không đủ chỗ */
    gap: 20px; /* Khoảng cách giữa các stat */
    margin-top: 10px; /* Tạo khoảng cách với phần trên */
    padding-top: 16px;
    border-top: 1px solid rgba(255, 255, 255, 0.15); /* Thêm đường phân cách tinh tế */

    .stat {
      background: transparent;
      padding: 0; /* Bỏ padding cũ */
      text-align: left; /* Căn trái cho các stat */
      border-left: none; /* Bỏ viền bên trái */

      .label {
        font-size: 13px;
        opacity: 0.8;
        display: block;
        margin-bottom: 2px; /* Khoảng cách nhỏ với value */
      }

      .value {
        font-size: 32px; /* Tăng kích thước số liệu */
        font-weight: 700;
        color: #fff;
        line-height: 1; /* Đảm bảo line-height nhỏ */
      }
    }
  }
}

/* --- LAYOUT 2 CỘT --- */
.layout {
  display: grid;
  grid-template-columns: 0.4fr 0.6fr;
  gap: 24px; /* Tăng gap */
  margin-bottom: 24px;
}

/* --- CARD CHUNG --- */
.leaderboard-card,
.questions-card {
  background: #fff;
  border-radius: 16px; /* Đồng bộ bo góc */
  /* Thay đổi đổ bóng tinh tế hơn */
  box-shadow: 0 4px 12px rgba(149, 157, 165, 0.1);
  border: 1px solid #e2e8f0;
  padding: 24px; /* Tăng padding */
  overflow: hidden; /* Đảm bảo nội dung bên trong không tràn */

  h3 {
    font-size: 20px;
    font-weight: 600;
    margin-top: 0;
    margin-bottom: 16px;
    color: #1e293b;
  }
}

/* --- BẢNG XẾP HẠNG --- */
.leaderboard-card table {
  width: 100%;
  border-collapse: collapse;
  font-size: 14px;

  th, td {
    padding: 12px 8px; /* Tăng padding */
    border-bottom: 1px solid #eef2ff;
    text-align: left;
  }

  th {
    color: #64748b;
    font-weight: 500;
    font-size: 12px;
    text-transform: uppercase;
  }

  td:nth-child(3), td:nth-child(4) {
    text-align: right; /* Căn phải cho Điểm & Đúng */
  }

  th:nth-child(3), th:nth-child(4) {
    text-align: right;
  }

  tbody tr:last-child {
    td {
      border-bottom: none; /* Bỏ viền cho dòng cuối */
    }
  }

  tr.is-me {
    background: #eef2ff;
    font-weight: 600;
    color: #4338ca;
  }

  tr.is-top {
    border-left: 4px solid #facc15; /* Làm viền đậm hơn */
    td:first-child {
      font-weight: 700;
    }
  }
}

/* --- CHI TIẾT CÂU HỎI --- */
.questions-card {
  h3 {
    border-bottom: 1px solid #e2e8f0;
    padding-bottom: 16px;
  }
}

.question-item {
  border-radius: 16px; /* Đồng bộ bo góc */
  border: 1px solid #e2e8f0;
  padding: 16px; /* Tăng padding */
  margin-bottom: 16px;
  transition: all 0.2s ease-in-out;

  &.correct {
    border-color: #4ade80;
    background: #f0fdf4;
  }

  &.incorrect {
    border-color: #f87171;
    background: #fef2f2;
  }
}

.q-header {
  /* Cải tiến lớn: dùng flexbox cho header */
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
  flex-wrap: wrap;
  gap: 8px;
}

.q-title {
  display: flex;
  align-items: center;
  gap: 10px;

  .index {
    font-size: 16px;
    font-weight: 600;
    color: #334155;
  }

  .status-chip {
    /* Biến text thành "chip" (thẻ) */
    font-size: 12px;
    font-weight: 500;
    padding: 3px 10px;
    border-radius: 999px;
  }

  /* Tô màu cho chip dựa trên class cha */
  .correct & .status-chip {
    background: #22c55e;
    color: #fff;
  }

  .incorrect & .status-chip {
    background: #ef4444;
    color: #fff;
  }
}

.q-meta {
  font-size: 13px;
  color: #64748b;
  font-style: italic;
}

.q-content {
  font-size: 15px;
  color: #1e293b;
  line-height: 1.6;

  .q-media-container {
    margin-top: 1rem;
    border-radius: 12px; /* Bo góc cho media */
    overflow: hidden;
    border: 1px solid #e2e8f0; /* Thêm viền nhẹ */

    .q-media-image {
      max-width: 100%;
      height: auto;
      display: block;
    }

    .q-media-audio {
      width: 100%;
      background: #f1f5f9; /* Thêm nền cho audio */
    }
  }
}

.q-options {
  margin-top: 16px;
  display: grid;
  gap: 8px; /* Khoảng cách giữa các lựa chọn */

  .option {
    display: flex;
    align-items: center;
    padding: 12px 14px; /* Tăng padding */
    border-radius: 12px; /* Đồng bộ bo góc */
    border: 1px solid #e2e8f0;
    background: #f8fafc;
    transition: all 0.2s ease-in-out;

    .opt-label {
      font-weight: 600;
      margin-right: 8px;
      color: #334155;
    }

    .opt-text {
      font-size: 14px;
      color: #334155;
    }

    /* Các style cho lựa chọn */
    &.correct {
      border-color: #22c55e;
      background: #dcfce7;

      .opt-label, .opt-text {
        color: #166534;
      }
    }

    &.wrong-chosen {
      border-color: #ef4444;
      background: #fee2e2;

      .opt-label, .opt-text {
        color: #991b1b;
      }
    }

    /* Làm mờ các lựa chọn không được chọn và không đúng */
    &.chosen:not(.correct) {
      opacity: 0.7;
    }
  }
}

.q-explain {
  margin-top: 12px;
  padding: 12px;
  font-size: 14px;
  color: #334155;
  background: #f1f5f9;
  border-radius: 12px;
  line-height: 1.5;

  strong {
    color: #1e293b;
  }
}

/* --- NÚT HÀNH ĐỘNG --- */
.actions {
  display: flex;
  justify-content: flex-end; /* Đưa 2 nút về bên phải */
  gap: 12px; /* Thêm khoảng cách */
  margin-top: 8px;
}

.btn {
  border-radius: 999px;
  padding: 10px 20px; /* Tăng padding */
  border: 1px solid #e2e8f0;
  background: #fff;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  transition: all 0.2s ease-in-out;

  &:hover {
    background: #f8fafc;
    border-color: #cbd5e1;
  }

  &.primary {
    background: #4f46e5;
    color: #fff;
    border-color: #4f46e5;

    &:hover {
      background: #4338ca;
      border-color: #4338ca;
    }
  }
}
