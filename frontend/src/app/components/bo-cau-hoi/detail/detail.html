@if (!loading) {
  <div class="quiz-detail-container">
    <header class="quiz-header">
      <div class="header-info">
        <h1>{{ bo?.tieu_de }}</h1>
        <p class="meta">
          <b>Chủ đề:</b> {{ bo?.chu_de }} |
          <b>Trạng thái:</b> {{ bo?.trang_thai }} |
          <b>Chế độ:</b> {{ bo?.che_do_hien_thi }}
        </p>
      </div>
      <div class="header-actions">
        <a (click)="navigateToDetaiList()" class="btn btn-gray">
          <i class="fas fa-arrow-left"></i> Quay Lại
        </a>
        <button class="btn btn-green" (click)="goCreateQuestion()">
          <i class="fas fa-plus"></i> Thêm Câu Hỏi
        </button>
      </div>
    </header>

    <section class="quiz-description">
      <p><b>Mô tả:</b> {{ bo?.mo_ta || 'Không có mô tả' }}</p>
    </section>

    <section class="question-list">
      <h2><i class="fas fa-list"></i> Danh sách câu hỏi ({{ questions.length }})</h2>
      @if (questions.length > 0) {
        @for (q of questions; track q.id) {
          <div class="question-card">
            <div class="question-header">
              <h3>{{ q.noi_dung }}</h3>
              <span class="badge" [class.easy]="q.do_kho === 'DE'"
                    [class.medium]="q.do_kho === 'TRUNG_BINH'"
                    [class.hard]="q.do_kho === 'KHO'">
<!--              {{ q.do_kho }}-->
                @if (q.do_kho === 'DE') {
                  Dễ
                } @else if (q.do_kho === 'TRUNG_BINH') {
                  Trung bình
                } @else if (q.do_kho === 'KHO') {
                  Khó
                }
            </span>
            </div>

            <!--            @if (q.loai_noi_dung === 'HINH_ANH' && q.duong_dan_tep) {-->
            <!--              <div class="question-media">-->
            <!--                <img [src]="mediaUrl" alt="Ảnh minh họa">-->
            <!--              </div>-->
            <!--            }-->

            <!--            @if (q.loai_noi_dung === 'AM_THANH' && q.duong_dan_tep) {-->
            <!--              <div class="question-media">-->
            <!--                <audio controls [src]="mediaUrl"></audio>-->
            <!--              </div>-->
            <!--            }-->
            @if (q.loai_noi_dung === 'HINH_ANH' && q.duong_dan_tep) {
              <img [src]="getMediaUrl(q)" alt="Ảnh minh họa"/>
            }
            @if (q.loai_noi_dung === 'AM_THANH' && q.duong_dan_tep) {
              <audio controls [src]="getMediaUrl(q)"></audio>
            }


            <ul class="options">
              <li [class.correct]="q.dap_an_dung === 'A'">A. {{ q.lua_chon_a }}</li>
              <li [class.correct]="q.dap_an_dung === 'B'">B. {{ q.lua_chon_b }}</li>
              <li [class.correct]="q.dap_an_dung === 'C'">C. {{ q.lua_chon_c }}</li>
              <li [class.correct]="q.dap_an_dung === 'D'">D. {{ q.lua_chon_d }}</li>
            </ul>

            @if (q.giai_thich) {
              <div class="explanation">
                <i class="fas fa-info-circle"></i>
                {{ q.giai_thich }}
              </div>
            }
            <div class="question-actions">
              <button class="btn-edit"
                      (click)="navigateToEdit(q.id)">
                <i class="fas fa-edit"></i> Chỉnh sửa
              </button>
              <button class="btn-delete" (click)="onDeleteQuestion(q.id)">
                <i class="fas fa-trash"></i> Xóa
              </button>
            </div>
          </div>
        }
      } @else {
        <div class="empty-state">
          <i class="fas fa-folder-open"></i>
          <p>Chưa có câu hỏi nào trong bộ này.</p>
        </div>
      } </section>
  </div>

} @else {
  <div class="loading">Đang tải dữ liệu...</div>
}
